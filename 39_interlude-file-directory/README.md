# OSTEP 39. 파일과 디렉터리

---

> 이 페이지는 운영체제: 아주 쉬운 세 가지 이야기(OSTEP) 39장 파일과 디렉토리에 대한 부분을 요약하였습니다.
작성일지 | 2023.06.02(금) 23:00
> 

# 39.1 파일과 디렉터리

---

## 저장 장치의 가상화에 대한 두 가지 주요 개념

### 1. 파일(file)

파일은 단순히 읽거나 쓸 수 있는 순차적인 바이트의 배열이다. 
각 파일은 `저수준 이름(low-level name)`을 갖고 있으며 보통은 숫자로 표현되지만 사용자는 그 이름에 대해서 알지 못한다. 
역사적인 이유로 이 저 수준의 이름을 `아이노드 번호(inode number)`라고  부른다. 
앞으로 살펴볼 장에서는 아이 노드에 대해서 더 자세히 살펴본다.

→ 각 파일은 아이노드 번호와 연결 되어 있다고 이해한다.

대부분의 시스템 에서는 운영체제는 파일의 구조를 모른다.(ex. 어떤 파일이 그림인지 문서인지 코드인지 모른다.)
파일 시스템의 역할은 그러한 데이터를 디스크에 안전히 저장하고, 데이터가 요청되면 처음 저장했던 데이터를 돌려주는 것.

→ “이렇게 하는 것이 보기보다 쉽지 않다”

> *뭔말하는건지 몰라서 결론을 내리자면
파일은 단순히 읽거나 쓸 수 있는 순차적인 바이트의 배열이다. 각 파일은 저수준 이름을 갖고 있는데 이게 아이노드 번호.
이 아이노드 번호를 통해서 데이터를 디스크에 저장하고 요청하는 건지 모르겠지만 이것이 보기보다 쉽지 않다고 한다..?*
> 

### 2. 디렉토리(directory)

파일과 마찬가지로 디렉토리도 저수준의 이름(예, 아이노드의 번호)를 갖는다. 하지만 파일과는 달리 디렉토리의 내용은 구체적으로 정해져 있다. <사용자가 읽을 수 있는 이름, 저 수준의 이름> 쌍으로 이루어진 목록을 갖고 있다.

<aside>
💡 ex | 저수준 이름으로 “10”을 갖고 있는 파일이 있는데, 그 파일은 사용자가 알아볼 수 있는 “foo”라는 이름을 갖고 있다고 해보자. “foo”가 들어있는 디렉토리에는 (”foo”, “10”) 이라는 항목이 있어서 사용자가 읽을 수 있는 이름과 저 수준의 이름을 연결하고 있다.

</aside>

디렉토리의 각 항목은 파일 또는 다른 디렉토리를 가리킨다. 디렉토리 내에 다른 디렉토리를 포함함으로써 사용자는 모든 파일들과 디렉토리들이 저장되어 있는 임의의 `디렉토리 트리(directory tree)` 또는 `디렉토리 계층(directory hierarchy)`을 구성할 수 있다.

→ 디렉토리 계층은 `루트 디렉토리(root directory)`부터 시작하며(유닉스 기반의 시스템에서 루트 디렉토리는 /으로 표현된다.) 원하는 파일이나 디렉토리의 이름을 표현 할 때까지 `구분자(separator)`를 사용하여 `하위 디렉토리`를 명시할 수 있다. 

<aside>
💡 예를 들어서 | 사용자가 foo라는 디렉토리를 루트 디렉토리 / 아래에 생성했다고 해 보자. 그리고 foo 디렉토리 안에 bar.txt 라는 파일을 생성하였다면, 그 파일들의 `절대 경로명(absolute pathname)`은 /foo/bar.txt 로 표현된다.

</aside>

![Untitled](OSTEP%2039%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%E1%84%80%E1%85%AA%20%E1%84%83%E1%85%B5%E1%84%85%E1%85%A6%E1%86%A8%E1%84%90%E1%85%A5%E1%84%85%E1%85%B5%20dc526758f0f148c88ef2005e6772d5e9/Untitled.png)

그림 42.1의 예제를 살펴보면, 그림에서 유효한 디렉토리들은 /, /foo, /bar, /bar/bar, /bar/foo 이고 유효한 파일들은 /foo/bar.txt와 /bar/foo/bar.txt이다. 디렉토리들과 파일들은 파일 시스템 트리 안에서 서로 다른 위치에 있다면 동일한 이름을 가질 수 있습니다.

이 예제에서 파일 이름이 두 부분으로 구성되어 있다는 것을 알 수 있습니다. bar와 txt가 `.`으로 구분되어 있습니다. c코드의 경우 .c 사진이면 .jpg등등이지만 이것은 `관용적(convention)`일 뿐입니다. 파일 이름이 main.c라고 내용이 반드시 C 소스 코드일 필요가 없습니다.

우리는 파일 시스템이 제공하는 훌륭한 기능 하나를 보았습니다.파일들을 효율적으로 명명할 수 있는 기능. 어떤 자원을 접근하는 가장 첫 단계는 그 대상의 이름을 아는 것이기 때문에 시스템에서 이름 짓기 기능은 매우 중요합니다.

# 39.2 파일 시스템 인터페이스

---

앞으로 파일의 생성과 접근, 삭제 등의 기본부터 시작하여 파일 삭제를 담당하는 unlink() 라는 시스템 콜도 다룰 예정.

# 39.3 파일의 생성

---

## 파일의 생성 | open( )